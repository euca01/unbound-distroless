server:
  interface: 0.0.0.0
  interface: ::0
  port: 53

  # tells Unbound not to drop privileges, since itâ€™s already running as the nonroot user in the container.
  username: "" 
  chroot: ""
  pidfile: "/tmp/unbound.pid"

  # Limit access to internal trusted subnets
  access-control: 192.168.0.0/16 allow
  access-control: 10.0.0.0/8 allow
  access-control: 127.0.0.0/8 allow
  access-control: fd00::/8 allow      # Your ULA range (or adjust accordingly)
  access-control: fe80::/10 allow     # Link-local if needed
  access-control: 0.0.0.0/0 refuse
  access-control: ::0/0 refuse

  do-not-query-localhost: yes
  unwanted-reply-threshold: 10000000

  # Threading (autodetect at runtime preferred)
  num-threads: 4

  # Caching
  msg-cache-size: 512m
  rrset-cache-size: 1024m
  cache-max-ttl: 86400
  cache-min-ttl: 3600
  serve-expired: yes
  serve-expired-ttl: 3600
  prefetch: yes
  prefetch-key: yes

  # Query processing
  num-queries-per-thread: 16384
  outgoing-range: 32768
  jostle-timeout: 100

  # Buffers
  so-rcvbuf: 8m
  so-sndbuf: 8m
  so-reuseport: yes

  # Protocols
  do-ip4: yes
  do-ip6: yes
  do-udp: yes
  do-tcp: yes

  # EDNS settings
  edns-buffer-size: 1232
  max-udp-size: 1232


  msg-cache-slabs: 16
  rrset-cache-slabs: 16
  infra-cache-slabs: 16
  key-cache-slabs: 16

  root-hints: "/etc/unbound/root.hints"

  # DNSSEC
  auto-trust-anchor-file: "/var/lib/unbound/root.key"
  val-clean-additional: yes
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-below-nxdomain: yes

  # Privacy & security
  hide-identity: yes
  hide-version: yes
  use-caps-for-id: yes
  minimal-responses: yes
  max-udp-size: 1232
  edns-buffer-size: 1232

  serve-expired: yes
  serve-expired-ttl: 3600
  serve-expired-client-timeout: 1800
  serve-expired-reply-ttl: 60
  serve-expired-ttl-reset: yes
  cookies: yes

  deny-any: yes

  # Modules
  module-config: "validator iterator"

  # Logging
  verbosity: 1
  logfile: ""

# Remote control (disabled for security; enable with care)
remote-control:
  control-enable: no